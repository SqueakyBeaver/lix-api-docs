<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nix: lix/libstore/derivations.hh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nix
   &#160;<span id="projectnumber">2.93.0-dev</span>
   </div>
   <div id="projectbrief">Lix: A modern, delicious implementation of the Nix package manager; unstable internal interfaces</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('derivations_8hh.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">derivations.hh File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="path_8hh_source.html">lix/libstore/path.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="result_8hh_source.html">lix/libutil/result.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_8hh_source.html">lix/libutil/types.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libutil_2hash_8hh_source.html">lix/libutil/hash.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="content-address_8hh_source.html">lix/libstore/content-address.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="repair-flag_8hh_source.html">lix/libutil/repair-flag.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="derived-path-map_8hh_source.html">lix/libstore/derived-path-map.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sync_8hh_source.html">lix/libutil/sync.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="comparator_8hh_source.html">lix/libutil/comparator.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="variant-wrapper_8hh_source.html">lix/libutil/variant-wrapper.hh</a>&quot;</code><br />
<code>#include &lt;kj/async.h&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;variant&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for derivations.hh:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="derivations_8hh__incl.svg" width="3276" height="880"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="derivations_8hh__dep__incl.svg" width="864" height="316"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="derivations_8hh_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput.html">nix::DerivationOutput</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput_1_1InputAddressed.html">nix::DerivationOutput::InputAddressed</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput_1_1CAFixed.html">nix::DerivationOutput::CAFixed</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput_1_1CAFloating.html">nix::DerivationOutput::CAFloating</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput_1_1Deferred.html">nix::DerivationOutput::Deferred</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationOutput_1_1Impure.html">nix::DerivationOutput::Impure</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationType.html">nix::DerivationType</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationType_1_1InputAddressed.html">nix::DerivationType::InputAddressed</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationType_1_1ContentAddressed.html">nix::DerivationType::ContentAddressed</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DerivationType_1_1Impure.html">nix::DerivationType::Impure</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1BasicDerivation.html">nix::BasicDerivation</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1Derivation.html">nix::Derivation</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnix_1_1DrvHash.html">nix::DrvHash</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a921dd79fb6450fe32b49cf0a7323d271" id="r_a921dd79fb6450fe32b49cf0a7323d271"><td class="memItemLeft" align="right" valign="top"><a id="a921dd79fb6450fe32b49cf0a7323d271" name="a921dd79fb6450fe32b49cf0a7323d271"></a>
typedef std::map&lt; std::string, <a class="el" href="structnix_1_1DerivationOutput.html">DerivationOutput</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>nix::DerivationOutputs</b></td></tr>
<tr class="separator:a921dd79fb6450fe32b49cf0a7323d271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ca3f3b9338d3b4bd7954ecc1e836a3" id="r_a24ca3f3b9338d3b4bd7954ecc1e836a3"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, std::pair&lt; <a class="el" href="structnix_1_1DerivationOutput.html">DerivationOutput</a>, std::optional&lt; <a class="el" href="classnix_1_1StorePath.html">StorePath</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24ca3f3b9338d3b4bd7954ecc1e836a3">nix::DerivationOutputsAndOptPaths</a></td></tr>
<tr class="separator:a24ca3f3b9338d3b4bd7954ecc1e836a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069bed8bbf28e19ace4c6403eb867b82" id="r_a069bed8bbf28e19ace4c6403eb867b82"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="classnix_1_1StorePath.html">StorePath</a>, StringSet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a069bed8bbf28e19ace4c6403eb867b82">nix::DerivationInputs</a></td></tr>
<tr class="separator:a069bed8bbf28e19ace4c6403eb867b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0609b9231aa3d3aa10e781479c6ffd" id="r_afd0609b9231aa3d3aa10e781479c6ffd"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="classnix_1_1StorePath.html">StorePath</a>, <a class="el" href="structnix_1_1DrvHash.html">DrvHash</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd0609b9231aa3d3aa10e781479c6ffd">nix::DrvHashes</a></td></tr>
<tr class="separator:afd0609b9231aa3d3aa10e781479c6ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab72fff2c77bdbd44c6b75e633eb5f6f5" id="r_ab72fff2c77bdbd44c6b75e633eb5f6f5"><td class="memItemLeft" align="right" valign="top">kj::Promise&lt; Result&lt; <a class="el" href="classnix_1_1StorePath.html">StorePath</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#ab72fff2c77bdbd44c6b75e633eb5f6f5">nix::writeDerivation</a> (<a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;drv, RepairFlag repair, bool readOnly)</td></tr>
<tr class="separator:ab72fff2c77bdbd44c6b75e633eb5f6f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab694c7ddcfcc66195fc2a4cfd5439b25" id="r_ab694c7ddcfcc66195fc2a4cfd5439b25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnix_1_1Derivation.html">Derivation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#ab694c7ddcfcc66195fc2a4cfd5439b25">nix::parseDerivation</a> (const <a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, std::string &amp;&amp;s, std::string_view name, const <a class="el" href="structnix_1_1FeatureSettings.html">ExperimentalFeatureSettings</a> &amp;xpSettings)</td></tr>
<tr class="separator:ab694c7ddcfcc66195fc2a4cfd5439b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2659ffb72c4f98c19fd3216c28e6ea30" id="r_a2659ffb72c4f98c19fd3216c28e6ea30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#a2659ffb72c4f98c19fd3216c28e6ea30">nix::isDerivation</a> (std::string_view fileName)</td></tr>
<tr class="separator:a2659ffb72c4f98c19fd3216c28e6ea30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c070775f551e31d57f3d1072f0006cb" id="r_a4c070775f551e31d57f3d1072f0006cb"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#a4c070775f551e31d57f3d1072f0006cb">nix::outputPathName</a> (std::string_view drvName, <a class="el" href="outputs-spec_8hh.html#a4c4e34468f6987a4d687964d91616df9">OutputNameView</a> outputName)</td></tr>
<tr class="separator:a4c070775f551e31d57f3d1072f0006cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe150f0aa4671f0e76e5df70b2bd8b94" id="r_abe150f0aa4671f0e76e5df70b2bd8b94"><td class="memItemLeft" align="right" valign="top"><a id="abe150f0aa4671f0e76e5df70b2bd8b94" name="abe150f0aa4671f0e76e5df70b2bd8b94"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nix::operator|=</b> (<a class="el" href="structnix_1_1DrvHash.html#a28bc3bf23d5c92a0324f824bb40af4ca">DrvHash::Kind</a> &amp;self, const <a class="el" href="structnix_1_1DrvHash.html#a28bc3bf23d5c92a0324f824bb40af4ca">DrvHash::Kind</a> &amp;other) noexcept</td></tr>
<tr class="separator:abe150f0aa4671f0e76e5df70b2bd8b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33da5b0dec049e7c31c291f71a122016" id="r_a33da5b0dec049e7c31c291f71a122016"><td class="memItemLeft" align="right" valign="top">kj::Promise&lt; Result&lt; <a class="el" href="structnix_1_1DrvHash.html">DrvHash</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#a33da5b0dec049e7c31c291f71a122016">nix::hashDerivationModulo</a> (<a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;drv, bool maskOutputs)</td></tr>
<tr class="separator:a33da5b0dec049e7c31c291f71a122016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29637da2afa0c3bb1d882284967b6af3" id="r_a29637da2afa0c3bb1d882284967b6af3"><td class="memItemLeft" align="right" valign="top">kj::Promise&lt; Result&lt; std::map&lt; std::string, <a class="el" href="structnix_1_1Hash.html">Hash</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#a29637da2afa0c3bb1d882284967b6af3">nix::staticOutputHashes</a> (<a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;drv)</td></tr>
<tr class="separator:a29637da2afa0c3bb1d882284967b6af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d2661bfc91aba83a1380e259fba815" id="r_ad1d2661bfc91aba83a1380e259fba815"><td class="memItemLeft" align="right" valign="top"><a id="ad1d2661bfc91aba83a1380e259fba815" name="ad1d2661bfc91aba83a1380e259fba815"></a>
<a class="el" href="structnix_1_1Source.html">Source</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>nix::readDerivation</b> (<a class="el" href="structnix_1_1Source.html">Source</a> &amp;in, const <a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, <a class="el" href="structnix_1_1BasicDerivation.html">BasicDerivation</a> &amp;drv, std::string_view name)</td></tr>
<tr class="separator:ad1d2661bfc91aba83a1380e259fba815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d05ad6c61b4c9f5bb245b9db041fc1" id="r_ae8d05ad6c61b4c9f5bb245b9db041fc1"><td class="memItemLeft" align="right" valign="top"><a id="ae8d05ad6c61b4c9f5bb245b9db041fc1" name="ae8d05ad6c61b4c9f5bb245b9db041fc1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nix::writeDerivation</b> (<a class="el" href="structnix_1_1Sink.html">Sink</a> &amp;out, const <a class="el" href="classnix_1_1Store.html">Store</a> &amp;store, const <a class="el" href="structnix_1_1BasicDerivation.html">BasicDerivation</a> &amp;drv)</td></tr>
<tr class="separator:ae8d05ad6c61b4c9f5bb245b9db041fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af96d89bd69997217236d2fb459de11cd" id="r_af96d89bd69997217236d2fb459de11cd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="derivations_8cc.html#af96d89bd69997217236d2fb459de11cd">nix::hashPlaceholder</a> (const <a class="el" href="outputs-spec_8hh.html#a4c4e34468f6987a4d687964d91616df9">OutputNameView</a> outputName)</td></tr>
<tr class="separator:af96d89bd69997217236d2fb459de11cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a069bed8bbf28e19ace4c6403eb867b82" name="a069bed8bbf28e19ace4c6403eb867b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069bed8bbf28e19ace4c6403eb867b82">&#9670;&#160;</a></span>DerivationInputs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;StorePath, StringSet&gt; <a class="el" href="#a069bed8bbf28e19ace4c6403eb867b82">nix::DerivationInputs</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For inputs that are sub-derivations, we specify exactly which output IDs we are interested in. </p>

</div>
</div>
<a id="a24ca3f3b9338d3b4bd7954ecc1e836a3" name="a24ca3f3b9338d3b4bd7954ecc1e836a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24ca3f3b9338d3b4bd7954ecc1e836a3">&#9670;&#160;</a></span>DerivationOutputsAndOptPaths</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, std::pair&lt;DerivationOutput, std::optional&lt;StorePath&gt; &gt; &gt; <a class="el" href="#a24ca3f3b9338d3b4bd7954ecc1e836a3">nix::DerivationOutputsAndOptPaths</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These are analogues to the previous DerivationOutputs data type, but they also contains, for each output, the (optional) store path in which it would be written. To calculate values of these types, see the corresponding functions in BasicDerivation. </p>

</div>
</div>
<a id="afd0609b9231aa3d3aa10e781479c6ffd" name="afd0609b9231aa3d3aa10e781479c6ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd0609b9231aa3d3aa10e781479c6ffd">&#9670;&#160;</a></span>DrvHashes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;StorePath, DrvHash&gt; <a class="el" href="#afd0609b9231aa3d3aa10e781479c6ffd">nix::DrvHashes</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Memoisation of hashDerivationModulo(). </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a33da5b0dec049e7c31c291f71a122016" name="a33da5b0dec049e7c31c291f71a122016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33da5b0dec049e7c31c291f71a122016">&#9670;&#160;</a></span>hashDerivationModulo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kj::Promise&lt; Result&lt; DrvHash &gt; &gt; nix::hashDerivationModulo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnix_1_1Store.html">Store</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>store</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>drv</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>maskOutputs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns hashes with the details of fixed-output subderivations expunged.</p>
<p>A fixed-output derivation is a derivation whose outputs have a specified content hash and hash algorithm. (Currently they must have exactly one output (<code>out</code>), which is specified using the <code>outputHash</code> and <code>outputHashAlgo</code> attributes, but the algorithm doesn't assume this.) We don't want changes to such derivations to propagate upwards through the dependency graph, changing output paths everywhere.</p>
<p>For instance, if we change the url in a call to the <code>fetchurl</code> function, we do not want to rebuild everything depending on it&mdash;after all, (the hash of) the file being downloaded is unchanged. So the <em>output paths</em> should not change. On the other hand, the <em>derivation paths</em> should change to reflect the new dependency graph.</p>
<p>For fixed-output derivations, this returns a map from the name of each output to its hash, unique up to the output's contents.</p>
<p>For regular derivations, it returns a single hash of the derivation ATerm, after subderivations have been likewise expunged from that derivation. </p>

</div>
</div>
<a id="af96d89bd69997217236d2fb459de11cd" name="af96d89bd69997217236d2fb459de11cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af96d89bd69997217236d2fb459de11cd">&#9670;&#160;</a></span>hashPlaceholder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string nix::hashPlaceholder </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="outputs-spec_8hh.html#a4c4e34468f6987a4d687964d91616df9">OutputNameView</a></td>          <td class="paramname"><span class="paramname"><em>outputName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This creates an opaque and almost certainly unique string deterministically from the output name.</p>
<p>It is used as a placeholder to allow derivations to refer to their own outputs without needing to use the hash of a derivation in itself, making the hash near-impossible to calculate. </p>

</div>
</div>
<a id="a2659ffb72c4f98c19fd3216c28e6ea30" name="a2659ffb72c4f98c19fd3216c28e6ea30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2659ffb72c4f98c19fd3216c28e6ea30">&#9670;&#160;</a></span>isDerivation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nix::isDerivation </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>fileName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo</a></b></dt><dd>Remove.</dd></dl>
<p>Use Path::isDerivation instead. </p>

</div>
</div>
<a id="a4c070775f551e31d57f3d1072f0006cb" name="a4c070775f551e31d57f3d1072f0006cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c070775f551e31d57f3d1072f0006cb">&#9670;&#160;</a></span>outputPathName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string nix::outputPathName </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>drvName</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="outputs-spec_8hh.html#a4c4e34468f6987a4d687964d91616df9">OutputNameView</a></td>          <td class="paramname"><span class="paramname"><em>outputName</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the name that will be used for the store path for this output.</p>
<p>This is usually &lt;drv-name&gt;-&lt;output-name&gt;, but is just &lt;drv-name&gt; when the output name is "out". </p>

</div>
</div>
<a id="ab694c7ddcfcc66195fc2a4cfd5439b25" name="ab694c7ddcfcc66195fc2a4cfd5439b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab694c7ddcfcc66195fc2a4cfd5439b25">&#9670;&#160;</a></span>parseDerivation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Derivation nix::parseDerivation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classnix_1_1Store.html">Store</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>store</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>s</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnix_1_1FeatureSettings.html">ExperimentalFeatureSettings</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>xpSettings</em><span class="paramdefsep"> = </span><span class="paramdefval">experimentalFeatureSettings</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a derivation from a file. </p>

</div>
</div>
<a id="a29637da2afa0c3bb1d882284967b6af3" name="a29637da2afa0c3bb1d882284967b6af3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29637da2afa0c3bb1d882284967b6af3">&#9670;&#160;</a></span>staticOutputHashes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kj::Promise&lt; Result&lt; std::map&lt; std::string, Hash &gt; &gt; &gt; nix::staticOutputHashes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnix_1_1Store.html">Store</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>store</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>drv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a map associating each output to a hash that uniquely identifies its derivation (modulo the self-references).</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo</a></b></dt><dd>What is the Hash in this map? </dd></dl>

</div>
</div>
<a id="ab72fff2c77bdbd44c6b75e633eb5f6f5" name="ab72fff2c77bdbd44c6b75e633eb5f6f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72fff2c77bdbd44c6b75e633eb5f6f5">&#9670;&#160;</a></span>writeDerivation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kj::Promise&lt; Result&lt; StorePath &gt; &gt; nix::writeDerivation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnix_1_1Store.html">Store</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>store</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnix_1_1Derivation.html">Derivation</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>drv</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RepairFlag</td>          <td class="paramname"><span class="paramname"><em>repair</em><span class="paramdefsep"> = </span><span class="paramdefval">NoRepair</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>readOnly</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a derivation to the Nix store, and return its path. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_aa82b8e09e8257f3398fbc82d9d0d95b.html">lix</a></li><li class="navelem"><a class="el" href="dir_c61249f5a961b29df4e720bc72eba688.html">libstore</a></li><li class="navelem"><a class="el" href="derivations_8hh.html">derivations.hh</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
